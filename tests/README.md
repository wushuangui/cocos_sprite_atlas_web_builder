# 测试目录说明

## 文件列表

### 测试页面

- **test_atlas.html**: 完整的图集算法测试页面
  - 12张预设测试图片
  - 实时性能测试
  - 算法日志输出
  - 图集预览

- **test_simple.html**: 简单功能验证页面
  - 5张随机尺寸图片
  - 快速测试两种模式
  - 验证无错误

### 测试脚本

- **test_algorithm.js**: Node.js算法测试脚本
  - 需要模拟canvas环境
  - 可用于性能基准测试

## 使用方法

### 方法1：直接打开

在文件管理器中双击HTML文件即可在浏览器中打开。

### 方法2：使用本地服务器

在项目根目录运行：

```bash
# 使用npm script
npm start

# 或直接使用http-server
npx http-server -p 8080
```

然后访问：
- 主应用：http://localhost:8080/index.html
- 完整测试：http://localhost:8080/tests/test_atlas.html
- 简单测试：http://localhost:8080/tests/test_simple.html

## 测试建议

### 1. 基本功能测试
使用test_simple.html验证：
- [ ] 算法无报错
- [ ] 两种模式都能工作
- [ ] 图集成功生成

### 2. 完整算法测试
使用test_atlas.html验证：
- [ ] 12张图片正确处理
- [ ] 2的幂次方模式正常
- [ ] 原始尺寸模式正常
- [ ] 控制台日志输出完整
- [ ] 图集预览显示正确

### 3. 性能测试
查看控制台输出：
- [ ] 处理时间在预期范围内
- [ ] 空间利用率合理
- [ ] 无内存泄漏

## 测试数据

### test_atlas.html 预设图片

| 索引 | 宽度 | 高度 | 颜色 |
|------|------|------|------|
| 0 | 200 | 150 | #FF6B6B |
| 1 | 180 | 180 | #4ECDC4 |
| 2 | 250 | 100 | #45B7D1 |
| 3 | 120 | 200 | #96CEB4 |
| 4 | 160 | 160 | #FFEAA7 |
| 5 | 300 | 80 | #DDA0DD |
| 6 | 140 | 140 | #98D8C8 |
| 7 | 220 | 120 | #F7DC6F |
| 8 | 100 | 180 | #BB8FCE |
| 9 | 190 | 190 | #85C1E9 |
| 10 | 280 | 90 | #F8B739 |
| 11 | 150 | 170 | #52B788 |

总面积：259,600 像素

### 预期结果

**2的幂次方模式**：
- 图集尺寸：512×512 或 1024×512
- 空间利用率：75-85%

**原始尺寸模式**：
- 图集尺寸：~800×~600（具体取决于排列）
- 空间利用率：85-95%

## 调试技巧

### 查看详细日志

1. 打开浏览器开发者工具（F12）
2. 切换到Console标签
3. 运行测试
4. 查看算法输出

### 性能分析

在Console中运行：

```javascript
// 测试性能
const start = performance.now();
// ... 运行图集生成 ...
const end = performance.now();
console.log(`耗时: ${(end - start).toFixed(2)}ms`);
```

### 截图对比

1. 在两种模式下生成图集
2. 截图保存对比
3. 分析排列差异
4. 记录利用率对比

## 常见问题

### Q: 测试页面打不开？
A: 确保使用了本地服务器或HTTP协议，file://协议可能有跨域问题。

### Q: 图片加载失败？
A: 测试图片是动态生成的canvas，不依赖外部资源。

### Q: 控制台没有日志？
A: 检查是否打开了开发者工具的Console标签。

## 贡献测试用例

如果你发现新的测试场景，可以：

1. 在此目录添加新的测试HTML文件
2. 遵循命名规范：test_描述.html
3. 在README中说明测试目的
4. 提交Pull Request

---

**最后更新**：2025年
